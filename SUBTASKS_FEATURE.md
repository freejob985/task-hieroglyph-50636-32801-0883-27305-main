# ميزة المهام الفرعية (SubTasks)

## نظرة عامة
تم إضافة ميزة المهام الفرعية إلى التطبيق، مما يسمح للمستخدمين بإضافة قائمة مهام فرعية لكل مهمة رئيسية مع إمكانية تتبع حالة كل مهمة فرعية (مكتملة أو غير مكتملة).

## الميزات الجديدة

### 1. إدارة المهام الفرعية
- **إضافة مهمة فرعية**: اضغط Enter في حقل الإدخال لإضافة مهمة فرعية جديدة
- **تعديل المهام الفرعية**: انقر على النص لتعديله مباشرة
- **حذف المهام الفرعية**: استخدم زر الحذف لإزالة مهمة فرعية
- **تبديل الحالة**: انقر على مربع الاختيار لتغيير حالة المهمة (مكتملة/غير مكتملة)

### 2. واجهة المستخدم
- **قسم منفصل**: قسم مخصص للمهام الفرعية في كل مهمة
- **إخفاء/إظهار**: إمكانية طي وفرد قسم المهام الفرعية
- **مؤشر التقدم**: شريط تقدم يوضح نسبة إكمال المهام الفرعية
- **أيقونات الحالة**: ✓ للمهام المكتملة و ✗ للمهام غير المكتملة

### 3. النسخ واللصق
- **نسخ مع الحالة**: عند نسخ المهام، تظهر المهام الفرعية مع علامات الحالة
- **تنسيق واضح**: المهام المكتملة تظهر بـ ✓ والغير مكتملة بـ ✗
- **دعم النسخ الجماعي**: يعمل مع نسخ جميع المهام والنسخ المحدد

### 4. الأصوات
- **أصوات مخصصة**: أصوات مختلفة لإضافة وحذف وتبديل حالة المهام الفرعية
- **إمكانية الإيقاف**: يمكن إيقاف الأصوات من الإعدادات

## كيفية الاستخدام

### إضافة مهمة فرعية
1. افتح مهمة للتعديل
2. ابحث عن قسم "المهام الفرعية"
3. اكتب النص في حقل الإدخال
4. اضغط Enter لإضافة المهمة

### إدارة المهام الفرعية
1. **تعديل النص**: انقر على النص لتعديله
2. **تغيير الحالة**: انقر على مربع الاختيار
3. **حذف المهمة**: انقر على زر الحذف
4. **طي/فرد القسم**: انقر على السهم

### نسخ المهام مع المهام الفرعية
1. استخدم زر "نسخ المهام" لنسخ جميع المهام
2. أو حدد مهام معينة واستخدم "نسخ المحدد"
3. ستظهر المهام الفرعية مع علامات الحالة في النص المنسوخ

## التحديثات التقنية

### أنواع البيانات الجديدة
```typescript
interface SubTask {
  id: string;
  text: string;
  completed: boolean;
  createdAt: number;
  updatedAt: number;
}

interface Todo {
  // ... الخصائص الموجودة
  subTasks?: SubTask[];
}
```

### المكونات الجديدة
- `SubTaskList.tsx`: مكون إدارة المهام الفرعية
- تحديث `TodoItem.tsx`: إضافة دعم المهام الفرعية
- تحديث `TodoList.tsx`: تحديث وظائف النسخ

### التوافق مع الإصدارات السابقة
- يتم دعم المهام الفرعية القديمة (parentId) مع المهام الفرعية الجديدة
- عند النسخ، تظهر المهام الفرعية الجديدة أولاً ثم القديمة

## الملفات المعدلة
- `src/types/todo.ts`: إضافة نوع SubTask
- `src/components/SubTaskList.tsx`: مكون جديد
- `src/components/TodoItem.tsx`: إضافة دعم المهام الفرعية
- `src/components/TodoList.tsx`: تحديث وظائف النسخ

## ملاحظات مهمة
- المهام الفرعية محفوظة مع المهمة الرئيسية في قاعدة البيانات المحلية
- يمكن إضافة عدد غير محدود من المهام الفرعية لكل مهمة
- المهام الفرعية لا تؤثر على حالة المهمة الرئيسية
- يتم حفظ حالة المهام الفرعية تلقائياً عند التغيير
